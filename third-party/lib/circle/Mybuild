package third_party.lib

@BuildArtifactPath(cppflags="-I$(EXTERNAL_BUILD_DIR)/third_party/lib/circle/circle/addon/vc4")
@BuildArtifactPath(cppflags="-I$(EXTERNAL_BUILD_DIR)/third_party/lib/circle/circle/addon")
@BuildArtifactPath(cppflags="-I$(EXTERNAL_BUILD_DIR)/third_party/lib/circle/circle/include")
@BuildArtifactPath(cppflags="-D__circle__  -D__VCCOREVER__=0x04000000")
@Build(stage=1, script="$(EXTERNAL_MAKE)")
static module circle {
}

@BuildDepends(third_party.lib.circle)
static module libvchiq {
	@AddPrefix("^BUILD/extbld/^MOD_PATH/../circle/circle/addon/vc4/interface/vmcs_host")
	source "vc_vchi_dispmanx.c",
		"vc_vchi_gencmd.c"

	depends third_party.lib.circle
}

@BuildDepends(third_party.lib.circle)
static module libbcm {
	option number pi
	option number aarch = 32

	@AddPrefix("^BUILD/extbld/^MOD_PATH/../circle/circle/addon/vc4/interface/bcm_host")
	source "bcm_host.c"

	depends third_party.lib.circle
}

/*
@AutoCmd
@Cmd(name = "dispmanx",
	help = "Test OpenManX VC library",
	man = '''
		NAME
			dispmanx - test
		SYNOPSIS
			display an overlay with dispmanx
		DESCRIPTION
		OPTIONS
		AUTHORS
			raspberry_pi
	''')
@BuildDepends(third_party.lib.libvchiq)
@BuildDepends(third_party.lib.libbcm)
@Build(stage=2)
module dispmanx {
	@AddPrefix("^BUILD/extbld/^MOD_PATH/../userland/userland/host_applications/linux/apps/hello_pi/hello_dispmanx")
	source "dispmanx.c"

	depends third_party.lib.libvchiq
	depends third_party.lib.libbcm
}
*/


	/*
	vchiqdevice.o \
	  vchiq_arm.o vchiq_2835_arm.o vchiq_core.o vchiq_kern_lib.o vchiq_connected.o \
	  vchiq_shim.o vchiq_util.o
	*/
