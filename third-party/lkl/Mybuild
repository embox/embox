package third_party.lkl

@Build(stage=2,script="$(EXTERNAL_MAKE)")
@BuildArtifactPath(cppflags="-I$(abspath $(EXTERNAL_BUILD_DIR))/third_party/lkl/lib/install/include")
module lib {
	depends embox.compat.libc.all
	depends embox.compat.posix.pthread_key

	@AddPrefix("^BUILD/extbld/^MOD_PATH/install")
	source "liblkl.a"
}

@App
@AutoCmd
@Build(stage=2,script="true")
@BuildDepends(third_party.lkl.lib)
@Cmd(name = "lkltest",
	help = "Simple LKL test",
	man = '''
		NAME
			lkltest - Simple LKL test
		AUTHORS
			Anton Ostrouhhov
	''')
module lkltest {
	source "lkl-test.c"

	depends embox.compat.libc.all
	depends third_party.lkl.lib
}

@App
@AutoCmd
@Build(stage=2,script="true")
@BuildDepends(third_party.lkl.lib)
@Cmd(name = "echotovda",
	help = "Write arguments to the standard output (/vda) using Linux system calls",
	man = '''
		NAME
			echotovda
		AUTHORS
			Anton Ostrouhhov
	''')
module echotovda {
	source "echotovda.c"

	depends embox.compat.libc.all
	depends third_party.lkl.lib
}
