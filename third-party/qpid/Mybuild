package third_party.qpid

@Build(script="$(EXTERNAL_MAKE)")
@BuildArtifactPath(cppflags="-I$(abspath $(EXTERNAL_BUILD_DIR))/third_party/qpid/core/include -I$(abspath $(EXTERNAL_BUILD_DIR))/third_party/qpid/core/include/qpid",
		ldflags="-L$(EXTERNAL_BUILD_DIR))/third_party/qpid/core/lib)
@BuildDepends(third_party.boost.core)
@BuildDepends(third_party.e2fsprogs.core)
@BuildDepends(third_party.STLport.core)
static module core {
	@AddPrefix("^BUILD/extbld/^MOD_PATH/lib")
	source "libqmf.a", "libqmf2.a", "libqmfconsole.a",
		"libqmfengine.a", "libqpidbroker.a", "libqpidclient.a",
		"libqpidcommon.a", "libqpidmessaging.a", "libqpidtypes.a"

	@NoRuntime depends embox.compat.posix.fs.fsop
	@NoRuntime depends embox.compat.posix.idx.pipe
	@NoRuntime depends embox.compat.posix.idx.poll
	@NoRuntime depends embox.compat.posix.idx.select
	@NoRuntime depends embox.compat.posix.net.gai_strerror
	@NoRuntime depends embox.compat.posix.net.getaddrinfo
	@NoRuntime depends embox.compat.posix.net.getnameinfo
	@NoRuntime depends embox.compat.posix.net.socket
	@NoRuntime depends embox.compat.posix.proc.fork
	@NoRuntime depends embox.compat.posix.util.gethostname
	@NoRuntime depends embox.compat.posix.util.sleep
	@NoRuntime depends embox.compat.posix.util.utsname
	@NoRuntime depends embox.lib.LibC
	@NoRuntime depends embox.net.lib.getifaddrs
	@NoRuntime depends third_party.boost.core
	@NoRuntime depends third_party.e2fsprogs.core
	@NoRuntime depends third_party.STLport.core
}

module hello extends embox.lib.cxx.app {
	@NoRuntime depends core

	@IncludePathBefore("$(ROOT_DIR)/build/stlport/include/stlport")
	@IncludePath("$(ROOT_DIR)/third-party/STLport/include")
	@IncludePath("$(ROOT_DIR)/build/qpid/include")
	source "../../../../qpid/src/qpid/examples/messaging/hello_world.cpp"

	//source "order.mk"
}
