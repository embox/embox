package third_party.gcc

@LinkerSection(text="libstdcxx_text",rodata="libstdcxx_rodata",data="libstdcxx_data",bss="libstdcxx_bss",arm_exidx="libstdcxx_arm_exidx",arm_extab="libstdcxx_arm_extab")
@BuildDepends(gcc_build)
@BuildArtifactPath(cppflags_before="-I$(EXTERNAL_BUILD_DIR)/third_party/gcc/gcc_build/install/include")
static module libstdcxx extends embox.lib.LibCxx {
	@AddPrefix("^BUILD/extbld/third_party/gcc/gcc_build/install/lib")
	source "libstdc++.a", "libsupc++.a"

	@NoRuntime depends gcc_build
}

@BuildDepends(gcc_build)
static module libgcc extends embox.lib.libgcc {
	@AddPrefix("^BUILD/extbld/third_party/gcc/gcc_build/install/lib")
	source "libgcc.a"

	@NoRuntime depends gcc_build
}

@BuildDepends(gcc_build)
@BuildArtifactPath(cppflags_before="-I$(THIRDPARTY_DIR)/compiler_headers/include")
@BuildArtifactPath(cppflags="-I$(EXTERNAL_BUILD_DIR)/third_party/gcc/gcc_build/build/gcc/include")
module compiler_headers extends third_party.compiler_headers {
	@NoRuntime depends gcc_build
}

@Build(stage=1,script="$(EXTERNAL_MAKE)")
static module gcc_build {
	option boolean optspace=true
	option boolean force_gcc_version=false
	option string gcc_version="14.3.0"

	@NoRuntime depends embox.compat.libc.all
	@NoRuntime depends embox.compat.posix.proc.atexit_api
}
