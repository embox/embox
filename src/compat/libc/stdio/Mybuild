package embox.compat.libc

static module Print {
	option number support_floating = 1

	source "printf_impl.c"
	source "printf_impl.h"

	//depends LibCMath // depends from support_floating value
	@NoRuntime depends stdlib.core // atoi
	@NoRuntime depends LibCType
}

static module LibCStdioSprintf {
	source "sprintf.c"
	source "snprintf.c"

	@NoRuntime depends Print
	@NoRuntime depends embox.lib.LibGcc
}

static module LibCStdioFilePool {
	option number file_quantity = 16

	source "stdio_file.c"
}

static module LibCStdioOpen {

	source "fopen.c"
	depends LibCStdioFilePool
	depends embox.compat.posix.fs.open
	@NoRuntime depends LibCString
}

static module LibCStdioFseek {
	source "fseek.c"

	depends embox.compat.posix.fs.lseek
}

static module LibCStdioFileOps {
	source "stdfile_static.c"

	source "fgetc.c"
	source "ungetc.c"
	source "fgets.c"

	source "funopen.c"
	source "fileno.c"
	source "fread.c"
	source "fwrite.c"
	source "fioctl.c"
	source "fclose.c"

	source "stdio_stubs.c"
	source "buf.c"

	depends LibCStdioFilePool
	depends embox.compat.posix.fs.file_ops


	source "fputc.c"
	source "fputs.c"

	source "printf.c"
	source "fprintf.c"
	@NoRuntime depends Print
}

static module LibCStdioRename {
	source "rename.c"
}

static module LibCStdio {
	@NoRuntime depends LibCStdioRename
	@NoRuntime depends LibCStdioSprintf
	@NoRuntime depends LibCStdioOpen
	@NoRuntime depends LibCStdioFseek
	@NoRuntime depends LibCStdioFileOps
	@NoRuntime depends LibCStdioScanf
	@NoRuntime depends LibCStdioPerror
}

static module LibCStdioPerror {
	source "perror.c"
}

static module LibCStdioScanf {
	source "scanf.c"
}
